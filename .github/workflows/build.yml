name: Debug CMake Issue

on: [push, pull_request]

jobs:
  debug-and-build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: List project structure (关键诊断步骤)
      run: |
        echo "=== 当前目录 ==="
        pwd
        echo "=== 列出所有文件和目录（包括隐藏的）==="
        ls -la
        echo "=== 检查 CMakeLists.txt 是否存在 ==="
        if [ -f "CMakeLists.txt" ]; then
          echo "✅ 在根目录找到了 CMakeLists.txt"
        else
          echo "❌ 在根目录未找到 CMakeLists.txt"
        fi

    - name: Clone ImGui
      run: |
        git clone https://github.com/ocornut/imgui.git ConnectTool/imgui

    # ... 后续安装依赖和构建步骤可以暂时注释掉，先专注诊断
    # - name: Install dependencies
    #   run: ...
